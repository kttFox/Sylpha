<Window x:Class="ViewLayerSupport.Views.MessagingWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
		xmlns:s="http://schemas.sylpha.com/wpf/mvvm"
		xmlns:v="clr-namespace:ViewLayerSupport.Views"
		xmlns:vm="clr-namespace:ViewLayerSupport.ViewModels"
		Title="MessagingWindow"
		Width="525"
		Height="350">

	<Window.DataContext>
		<vm:MessagingWindowViewModel />
	</Window.DataContext>

	<i:Interaction.Triggers>

		<!--  Viewに特別な要件が存在しない限りは、トリガーやアクションの自作にこだわらず積極的にコードビハインドを使いましょう  -->
		<!--  Viewのコードビハインドは、基本的にView内で完結するロジックとViewModelからのイベントの受信(専用リスナを使用する)に限るとトラブルが少なくなります  -->
		<!--  Livet1.1からはコードビハインドでViewModelのイベントを受信するためのWeakEventListenerサポートが追加されています  -->

		<!--  WindowのContentRenderedイベントのタイミングでViewModelのInitializeメソッドが呼ばれます  -->
		<i:EventTrigger EventName="ContentRendered">
			<s:CallMethodAction MethodName="Initialize"
								MethodTarget="{Binding}" />
		</i:EventTrigger>

		<!--  Windowが閉じたタイミングでViewModelのDisposeメソッドが呼ばれます  -->
		<i:EventTrigger EventName="Closed">
			<s:DataContextDisposeAction />
		</i:EventTrigger>

		<!--  WindowのCloseキャンセル処理に対応する場合は、WindowCloseCancelBehaviorの使用を検討してください  -->
		<s:InteractionMessageTrigger MessageKey="MessageKey_Confirm"
									 Messenger="{Binding Messenger}">
			<s:ConfirmationDialogInteractionMessageAction />
		</s:InteractionMessageTrigger>
	</i:Interaction.Triggers>

	<StackPanel>
		<Button Content="ConfirmFromViewModel">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:CallMethodAction MethodName="ConfirmFromViewModel"
										MethodTarget="{Binding}" />
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<Button Content="ConfirmFromView">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:ConfirmationDialogInteractionMessageAction>
						<s:DirectInteractionMessage CallbackMethodName="ConfirmFromView"
													CallbackMethodTarget="{Binding}">
							<s:ConfirmationMessage Caption="テスト"
												   Text="これはテスト用メッセージです。" />
						</s:DirectInteractionMessage>
					</s:ConfirmationDialogInteractionMessageAction>
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<Button Content="Single FileDialog">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:OpenFileDialogInteractionMessageAction>
						<s:DirectInteractionMessage CallbackMethodName="FileSelected"
													CallbackMethodTarget="{Binding}">
							<s:OpeningFileSelectionMessage Title="ファイルの選択" />
						</s:DirectInteractionMessage>
					</s:OpenFileDialogInteractionMessageAction>
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<Button Content="Multi FileDialog">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:OpenFileDialogInteractionMessageAction>
						<s:DirectInteractionMessage CallbackMethodName="FileSelected"
													CallbackMethodTarget="{Binding}">
							<s:OpeningFileSelectionMessage Title="ファイルの選択"
														   MultiSelect="True" />
						</s:DirectInteractionMessage>
					</s:OpenFileDialogInteractionMessageAction>
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<Button Content="Single FolderDialog">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:FolderBrowserDialogInteractionMessageAction>
						<s:DirectInteractionMessage CallbackMethodName="FolderSelected"
													CallbackMethodTarget="{Binding}">
							<s:FolderSelectionMessage Description="フォルダーの選択"
													  DialogPreference="None" />
						</s:DirectInteractionMessage>
					</s:FolderBrowserDialogInteractionMessageAction>
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<Button Content="Multi FolderDialog">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="Click">
					<s:FolderBrowserDialogInteractionMessageAction>
						<s:DirectInteractionMessage CallbackMethodName="FolderSelected"
													CallbackMethodTarget="{Binding}">
							<s:FolderSelectionMessage Description="フォルダーの選択"
													  DialogPreference="None"
													  Multiselect="True" />
						</s:DirectInteractionMessage>
					</s:FolderBrowserDialogInteractionMessageAction>
				</i:EventTrigger>
			</i:Interaction.Triggers>
		</Button>
		<TextBlock Text="{Binding OutputMessage}"
				   TextWrapping="Wrap" />
	</StackPanel>
</Window>